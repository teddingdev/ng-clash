"use strict";(self.webpackChunkng_clash=self.webpackChunkng_clash||[]).push([[144],{294:(S,M,n)=>{n.d(M,{I:()=>r});var m=n(6895),v=n(4650);let r=(()=>{class a{}return a.\u0275fac=function(c){return new(c||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[m.ez]}),a})()},7144:(S,M,n)=>{n.r(M),n.d(M,{DashboardModule:()=>L});var m=n(6895),v=n(5385),r=n(7337),a=(()=>{return(e=a||(a={})).proxies="proxies",e.logs="logs",e.rules="rules",e.links="links",e.settings="settings",a;var e})(),t=n(4650),c=n(8512),l=n(8226),d=n(4004),h=n(3151),i=n(2289),f=n(7392),u=n(4859),x=n(3683),o=n(3267);let O=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-loading"]],decls:1,vars:0,consts:[[1,"box"]],template:function(s,g){1&s&&t._UZ(0,"div",0)},styles:['@keyframes _ngcontent-%COMP%_rotar{0%{transform:rotate(0) scaleX(.82) scaleY(.82)}50%{transform:rotate(180deg) scaleX(1) scaleY(1)}to{transform:rotate(360deg) scaleX(.82) scaleY(.82)}}@keyframes _ngcontent-%COMP%_rotarIz{0%{transform:rotate(0) scaleX(.82) scaleY(.82)}50%{transform:rotate(-180deg) scaleX(1) scaleY(1)}to{transform:rotate(-360deg) scaleX(.82) scaleY(.82)}}.box[_ngcontent-%COMP%]{margin:4px;width:24px;height:24px;position:relative;z-index:99;box-sizing:border-box}.box[_ngcontent-%COMP%]:before, .box[_ngcontent-%COMP%]:after{content:"";border-radius:66%;position:absolute;top:0;left:0;width:100%;height:100%;transform-origin:center center}.box[_ngcontent-%COMP%]:before{box-shadow:inset 0 4px #00fafa99,inset 4px 0 #00c8c899,inset -4px 0 #0096c899,inset -4px 0 #00c8fa99;animation:_ngcontent-%COMP%_rotarIz 2s -.5s linear infinite}.box[_ngcontent-%COMP%]:after{box-shadow:inset 0 4px #fafa0099,inset 4px 0 #fac80099,inset -4px 0 #fa960099,inset -4px 0 #fa640099;animation:_ngcontent-%COMP%_rotar 2s -.5s linear infinite}']}),e})();const T=["*"];let P=(()=>{class e{ngOnInit(){}constructor(s){this.breakpointObserver=s,this.title="ng-clash",this.showSideNav=!1,this.isHandset$=this.breakpointObserver.observe(i.u3.Handset).pipe((0,d.U)(g=>g.matches),(0,h.d)())}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(i.Yg))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-layout"]],ngContentSelectors:T,decls:19,vars:9,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["color","primary",1,"toolbar"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],[1,"content"]],template:function(s,g){if(1&s){const C=t.EpF();t.F$t(),t.TgZ(0,"mat-sidenav-container",0)(1,"mat-sidenav",1,2),t.ALo(3,"async"),t.ALo(4,"async"),t.ALo(5,"async"),t.TgZ(6,"mat-toolbar"),t._UZ(7,"app-loading"),t._uU(8,"Menu "),t.qZA(),t.Hsn(9),t.qZA(),t.TgZ(10,"mat-sidenav-content")(11,"mat-toolbar",3)(12,"button",4),t.NdJ("click",function(){t.CHM(C);const $=t.MAs(2);return t.KtG($.toggle())}),t.TgZ(13,"mat-icon",5),t._uU(14,"menu"),t.qZA()(),t.TgZ(15,"span"),t._uU(16,"Ng-Clash"),t.qZA()(),t.TgZ(17,"div",6),t._UZ(18,"router-outlet"),t.qZA()()()}2&s&&(t.xp6(1),t.Q6J("mode",t.lcZ(4,5,g.isHandset$)?"over":"side")("opened",!1===t.lcZ(5,7,g.isHandset$)),t.uIk("role",t.lcZ(3,3,g.isHandset$)?"dialog":"navigation"))},dependencies:[r.lC,f.Hw,u.RK,x.Ye,o.JX,o.TM,o.Rh,O,m.Ov],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.content[_ngcontent-%COMP%]{box-sizing:border-box;min-height:calc(100% - 64px);padding:0 24px 24px}.toolbar[_ngcontent-%COMP%]{z-index:9!important}"]}),e})();var y=n(4633);function D(e,p){if(1&e){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-list-item",1),t.NdJ("click",function(){const E=t.CHM(s).$implicit,$=t.oxw();return t.KtG($.onChange.emit(E))}),t.TgZ(2,"mat-icon",2),t._uU(3),t.qZA(),t.TgZ(4,"span",3),t._uU(5),t.qZA()(),t.BQk()}if(2&e){const s=p.$implicit;t.xp6(1),t.Q6J("activated",s.activated),t.xp6(2),t.Oqu(s.icon),t.xp6(2),t.hij(" ",s.name," ")}}let b=(()=>{class e{constructor(){this.navList=[],this.onChange=new t.vpe}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-menu"]],viewQuery:function(s,g){if(1&s&&t.Gf(y.Ub,5),2&s){let C;t.iGM(C=t.CRH())&&(g.matSelectionList=C.first)}},inputs:{navList:"navList"},outputs:{onChange:"onChange"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"activated","click"],["matListItemIcon",""],["matListItemTitle",""]],template:function(s,g){1&s&&(t.TgZ(0,"mat-nav-list"),t.YNc(1,D,6,3,"ng-container",0),t.qZA()),2&s&&(t.xp6(1),t.Q6J("ngForOf",g.navList))},dependencies:[m.sg,y.Hk,y.Tg,y.Yt,y.sL,f.Hw]}),e})();const I=[{path:"",component:(()=>{class e{handleSideNavActive(s){this.navList=this.toggleSideNavActiveStatus(this.navList,g=>g.value===s.value),this.router.navigate([s.value],{relativeTo:this.route})}toggleSideNavActiveStatus(s,g){return s.map(C=>(C.activated=!!g(C),C))}ngOnInit(){this.navList=this.toggleSideNavActiveStatus(this.navList,s=>location.pathname.includes(s.value)),this.logService.initLog(),this.connectionService.initConnection()}constructor(s,g,C,E){this.router=s,this.route=g,this.logService=C,this.connectionService=E,this.navList=[{name:"\u4ee3\u7406",value:a.proxies,icon:"vpn_key",activated:!0},{name:"\u65e5\u5fd7",value:a.logs,icon:"terminal",activated:!1},{name:"\u89c4\u5219",value:a.rules,icon:"rule",activated:!1},{name:"\u8fde\u63a5",value:a.links,icon:"link",activated:!1},{name:"\u8bbe\u7f6e",value:a.settings,icon:"settings",activated:!1}]}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(r.F0),t.Y36(r.gz),t.Y36(c.$),t.Y36(l.M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-dashboard"]],decls:2,vars:1,consts:[[3,"navList","onChange"]],template:function(s,g){1&s&&(t.TgZ(0,"app-layout")(1,"app-menu",0),t.NdJ("onChange",function(E){return g.handleSideNavActive(E)}),t.qZA()()),2&s&&(t.xp6(1),t.Q6J("navList",g.navList))},dependencies:[P,b]}),e})(),children:[{path:"",redirectTo:a.proxies,pathMatch:"full"},{path:a.proxies,loadChildren:()=>Promise.all([n.e(592),n.e(11)]).then(n.bind(n,3011)).then(e=>e.ClashProxyModule)},{path:a.rules,loadChildren:()=>Promise.all([n.e(592),n.e(776)]).then(n.bind(n,8776)).then(e=>e.ClashRulesModule)},{path:a.logs,loadChildren:()=>n.e(764).then(n.bind(n,5764)).then(e=>e.ClashLogsModule)},{path:a.links,loadChildren:()=>n.e(127).then(n.bind(n,3127)).then(e=>e.ClashLinksModule)},{path:a.settings,loadChildren:()=>Promise.all([n.e(592),n.e(685)]).then(n.bind(n,9685)).then(e=>e.ClashSettingsModule)}]}];let U=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[r.Bz.forChild(I),r.Bz]}),e})();var A=n(294);let L=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,U,v.MaterialModule,A.I]}),e})()},1919:(S,M,n)=>{n.d(M,{i:()=>v});var m=(()=>{return(r=m||(m={}))[r.CONNECTING=0]="CONNECTING",r[r.OPEN=1]="OPEN",r[r.CLOSING=2]="CLOSING",r[r.CLOSED=3]="CLOSED",m;var r})();class v{constructor(a){this.connected=()=>{const i=this.instance;return!!i&&(i.readyState===m.CONNECTING||i.readyState===m.OPEN)},this.onClose=()=>{const i=this.instance;!i||!this.connected||(i.close(),this.instance=null)},this.onopen=i=>{console.log("webSocket \u5df2\u8fde\u63a5")},this.onclose=i=>{console.log("webSocket \u5df2\u5173\u95ed")},this.onmessage=i=>{console.log("\u{1f345} -> file: websocket.service.ts:67 -> WebsocketService -> data:",i)},this.onerror=i=>{console.log(i)},this.send=i=>{this.instance&&this.instance.send(JSON.stringify(i))};const{url:t,onopen:c,onerror:l,onclose:d,onmessage:h}=a;this.instance=new WebSocket(t),this.instance.onopen=c||this.onopen,this.instance.onerror=l||this.onerror,this.instance.onclose=d||this.onclose,this.instance.onmessage=h||this.onmessage}}},8226:(S,M,n)=>{n.d(M,{M:()=>t});var m=n(7579),v=n(1919),r=n(4650),a=n(535);let t=(()=>{class c{initConnection(){this.connection$.subscribe(d=>{this.connectionList=d})}constructor(d){this.hostService=d,this.connection$=new m.x,this.connectionList=null,new v.i({url:`ws://${this.hostService.host}:${this.hostService.port}/connections`,onmessage:x=>{let o=null;try{o=JSON.parse(x.data)}catch(O){console.log(O)}o&&this.connection$.next(o)}}).connected()}}return c.\u0275fac=function(d){return new(d||c)(r.LFG(a.x))},c.\u0275prov=r.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},8512:(S,M,n)=>{n.d(M,{$:()=>f});var m=n(5026),v=n(4004),r=n(262),a=n(9646),t=n(7579),c=n(1919),l=n(4650),d=n(535);const i=()=>(0,m.R)((u,x)=>(u.unshift(x),u),[]);let f=(()=>{class u{initLog(){this.debug$.pipe((0,v.U)(o=>JSON.parse(o)),(0,v.U)(o=>({...o,time:new Date})),i(),(0,r.K)(o=>(console.log("\u{1f345} -> file: log.service.ts:41 -> LogService -> catchError -> error:",o),(0,a.of)([])))).subscribe(o=>{this.debugLog=o}),this.info$.pipe((0,v.U)(o=>JSON.parse(o)),(0,v.U)(o=>({...o,time:new Date})),i(),(0,r.K)(o=>(console.log("\u{1f345} -> file: log.service.ts:41 -> LogService -> catchError -> error:",o),(0,a.of)([])))).subscribe(o=>{this.infoLog=o}),this.warn$.pipe((0,v.U)(o=>JSON.parse(o)),(0,v.U)(o=>({...o,time:new Date})),i(),(0,r.K)(o=>(console.log("\u{1f345} -> file: log.service.ts:41 -> LogService -> catchError -> error:",o),(0,a.of)([])))).subscribe(o=>{this.warnLog=o}),this.error$.pipe((0,v.U)(o=>JSON.parse(o)),(0,v.U)(o=>({...o,time:new Date})),i(),(0,r.K)(o=>(console.log("\u{1f345} -> file: log.service.ts:41 -> LogService -> catchError -> error:",o),(0,a.of)([])))).subscribe(o=>{this.errorLog=o})}constructor(o){this.hostService=o,this.debug$=new t.x,this.info$=new t.x,this.warn$=new t.x,this.error$=new t.x,this.debugLog=[],this.infoLog=[],this.warnLog=[],this.errorLog=[];const O=this.hostService.host,T=this.hostService.port,P=`ws://${O}:${T}/logs?level=info`,y=`ws://${O}:${T}/logs?level=warn`,b=`ws://${O}:${T}/logs?level=error`,W=new c.i({url:`ws://${O}:${T}/logs?level=debug`,onmessage:L=>{this.debug$.next(L.data)}}),I=new c.i({url:P,onmessage:L=>{this.info$.next(L.data)}}),U=new c.i({url:y,onmessage:L=>{this.warn$.next(L.data)}}),A=new c.i({url:b,onmessage:L=>{this.error$.next(L.data)}});W.connected(),I.connected(),U.connected(),A.connected()}}return u.\u0275fac=function(o){return new(o||u)(l.LFG(d.x))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},3151:(S,M,n)=>{n.d(M,{d:()=>t});var m=n(7579),v=n(6063);class r extends m.x{constructor(l=1/0,d=1/0,h=v.l){super(),this._bufferSize=l,this._windowTime=d,this._timestampProvider=h,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=d===1/0,this._bufferSize=Math.max(1,l),this._windowTime=Math.max(1,d)}next(l){const{isStopped:d,_buffer:h,_infiniteTimeWindow:i,_timestampProvider:f,_windowTime:u}=this;d||(h.push(l),!i&&h.push(f.now()+u)),this._trimBuffer(),super.next(l)}_subscribe(l){this._throwIfClosed(),this._trimBuffer();const d=this._innerSubscribe(l),{_infiniteTimeWindow:h,_buffer:i}=this,f=i.slice();for(let u=0;u<f.length&&!l.closed;u+=h?1:2)l.next(f[u]);return this._checkFinalizedStatuses(l),d}_trimBuffer(){const{_bufferSize:l,_timestampProvider:d,_buffer:h,_infiniteTimeWindow:i}=this,f=(i?1:2)*l;if(l<1/0&&f<h.length&&h.splice(0,h.length-f),!i){const u=d.now();let x=0;for(let o=1;o<h.length&&h[o]<=u;o+=2)x=o;x&&h.splice(0,x+1)}}}var a=n(3099);function t(c,l,d){let h,i=!1;return c&&"object"==typeof c?({bufferSize:h=1/0,windowTime:l=1/0,refCount:i=!1,scheduler:d}=c):h=c??1/0,(0,a.B)({connector:()=>new r(h,l,d),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}}}]);