"use strict";(self.webpackChunkng_clash=self.webpackChunkng_clash||[]).push([[685],{9685:(N,m,i)=>{i.r(m),i.d(m,{ClashSettingsModule:()=>M});var s=i(6895),l=i(4006),A=i(5385),f=i(7337),t=i(4650),p=i(4936),C=i(210),g=(()=>{return(n=g||(g={})).RULE="rule",n.SCRIPT="script",n.DIRECT="direct",n.GLOBAL="global",g;var n})(),c=i(5412),u=i(3546),v=i(4144),d=i(9549),h=i(4859);let E=(()=>{class n{onCancel(){this.dialogRef.close()}onConfirm(){this.dialogRef.close(this.validateForm.value)}constructor(o,e,r){this.fb=o,this.dialogRef=e,this.data=r,this.validateForm=this.fb.group({hostname:[],port:[],key:[]}),this.validateForm.patchValue(this.data)}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(l.qu),t.Y36(c.so),t.Y36(c.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-settings-control"]],decls:39,vars:1,consts:[[3,"formGroup"],[1,"flex-box"],[1,"flex-item"],[1,"label"],[1,"control"],["appearance","fill"],["matInput","","formControlName","hostname"],["matInput","","formControlName","port"],["matInput","","formControlName","key"],[1,"tip"],[1,"actions"],["type","button","mat-raised-button","",1,"action",3,"click"],["type","button","mat-raised-button","","color","primary",1,"action",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t._uU(3," \u5916\u90e8\u63a7\u5236\u8bbe\u7f6e "),t.qZA()(),t.TgZ(4,"mat-card-content")(5,"form",0)(6,"div",1)(7,"div",2)(8,"div",3),t._uU(9,"\u4e3b\u673a\u540d"),t.qZA(),t.TgZ(10,"div",4)(11,"mat-form-field",5)(12,"mat-label"),t._uU(13,"\u4e3b\u673a\u540d"),t.qZA(),t._UZ(14,"input",6),t.qZA()()(),t.TgZ(15,"div",2)(16,"div",3),t._uU(17,"\u7aef\u53e3"),t.qZA(),t.TgZ(18,"div",4)(19,"mat-form-field",5)(20,"mat-label"),t._uU(21,"\u7aef\u53e3"),t.qZA(),t._UZ(22,"input",7),t.qZA()()(),t.TgZ(23,"div",2)(24,"div",3),t._uU(25,"\u5bc6\u94a5"),t.qZA(),t.TgZ(26,"div",4)(27,"mat-form-field",5)(28,"mat-label"),t._uU(29,"\u5bc6\u94a5"),t.qZA(),t._UZ(30,"input",8),t.qZA()()()()()(),t.TgZ(31,"mat-card-footer")(32,"div",9),t._uU(33," \u8bf7\u6ce8\u610f\uff0c\u4fee\u6539\u8be5\u914d\u7f6e\u9879\u5e76\u4e0d\u4f1a\u4fee\u6539\u4f60\u7684 Clash \u914d\u7f6e\u6587\u4ef6\uff0c\u8bf7\u786e\u8ba4\u4fee\u6539\u540e\u7684\u5916\u90e8\u63a7\u5236\u5730\u5740\u548c Clash \u914d\u7f6e\u6587\u4ef6\u5185\u7684\u5730\u5740\u4e00\u81f4\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4 Dashboard \u65e0\u6cd5\u8fde\u63a5\u3002 "),t.qZA()(),t.TgZ(34,"mat-card-actions",10)(35,"button",11),t.NdJ("click",function(){return e.onCancel()}),t._uU(36,"\u53d6\u6d88"),t.qZA(),t.TgZ(37,"button",12),t.NdJ("click",function(){return e.onConfirm()}),t._uU(38,"\u786e\u5b9a"),t.qZA()()()),2&o&&(t.xp6(5),t.Q6J("formGroup",e.validateForm))},dependencies:[l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,u.a8,u.hq,u.dn,u.rt,u.dk,u.n5,v.Nt,d.KE,d.hX,h.lW],styles:[".flex-box[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.flex-item[_ngcontent-%COMP%]{flex-grow:0;flex-shrink:0;flex-basis:calc(100% + -0px);margin:0;display:flex;justify-content:space-between;align-items:center}.flex-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.tip[_ngcontent-%COMP%]{margin:8px 16px;padding:8px 16px;border-left:4px solid;color:#00000050}.actions[_ngcontent-%COMP%]{justify-content:flex-end}.action[_ngcontent-%COMP%]{margin:0 8px}"]}),n})();var F=i(9300),x=i(7009),b=i(7392),T=i(455),Z=i(811);function U(n,a){if(1&n&&(t.TgZ(0,"mat-button-toggle",20),t._uU(1),t.qZA()),2&n){const o=a.$implicit;t.Q6J("value",o.value),t.xp6(1),t.hij(" ",o.key," ")}}function S(n){return null!=n}let y=(()=>{class n{set dashboardConfig(o){o&&this.validateForm.reset(o)}get dashboardConfig(){return this._dashboardConfig}openDialog(){this.dialog.open(E,{width:"600px",data:this.externalControlConfig}).afterClosed().pipe((0,F.h)(S)).subscribe(e=>{e&&(this.storeService.externalControlConfig=e)})}save(){this.clashApiService.putConfig(this.validateForm.value).subscribe(o=>{null===o?this._snackBar.open("success","close",{duration:3e3}):void 0===o&&this._snackBar.open("error","close",{duration:3e3})})}ngOnInit(){}constructor(o,e,r,D,O){this.fb=o,this.dialog=e,this._snackBar=r,this.storeService=D,this.clashApiService=O,this._dashboardConfig=null,this.externalControlConfig=null,this.clashMode=g,this.change=new t.vpe,this.validateForm=this.fb.group({port:[null],mode:[null],"socks-port":[null],"redir-port":[null],"mixed-port":[null],"allow-lan":[null],"log-level":[null]})}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(l.qu),t.Y36(c.uw),t.Y36(x.ux),t.Y36(p.d),t.Y36(C.A))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-settings"]],inputs:{dashboardConfig:"dashboardConfig",externalControlConfig:"externalControlConfig"},outputs:{change:"change"},decls:79,vars:7,consts:[[1,"container"],[3,"formGroup"],[1,"flex-box"],[1,"flex-item"],[1,"label"],[1,"control"],["labelPosition","before","disabled",""],["name","fontStyle","aria-label","Font Style"],["value","bold"],["value","italic"],["formControlName","allow-lan","labelPosition","before"],["formControlName","mode"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill"],["formControlName","socks-port","matInput","","formControlName","socks-port"],["formControlName","redir-port","matInput",""],["formControlName","mixed-port","matInput","","formControlName","mixed-port"],[1,"external-config",3,"click"],[1,"save"],["mat-fab","",3,"color","click"],[3,"value"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"form",1)(2,"mat-card")(3,"mat-card-content")(4,"div",2)(5,"div",3)(6,"div",4),t._uU(7,"\u5f00\u673a\u65f6\u542f\u52a8"),t.qZA(),t.TgZ(8,"div",5),t._UZ(9,"mat-slide-toggle",6),t.qZA()(),t.TgZ(10,"div",3)(11,"div",4),t._uU(12,"\u8bed\u8a00"),t.qZA(),t.TgZ(13,"div",5)(14,"mat-button-toggle-group",7)(15,"mat-button-toggle",8),t._uU(16,"\u4e2d\u6587"),t.qZA(),t.TgZ(17,"mat-button-toggle",9),t._uU(18,"English"),t.qZA()()()(),t.TgZ(19,"div",3)(20,"div",4),t._uU(21,"\u8bbe\u4e3a\u7cfb\u7edf\u4ee3\u7406"),t.qZA(),t.TgZ(22,"div",5),t._UZ(23,"mat-slide-toggle",6),t.qZA()(),t.TgZ(24,"div",3)(25,"div",4),t._uU(26,"\u5141\u8bb8\u6765\u81ea\u5c40\u57df\u7f51\u7684\u8fde\u63a5"),t.qZA(),t.TgZ(27,"div",5),t._UZ(28,"mat-slide-toggle",10),t.qZA()()()()(),t._UZ(29,"br"),t.TgZ(30,"mat-card")(31,"mat-card-content")(32,"div",2)(33,"div",3)(34,"div",4),t._uU(35,"\u4ee3\u7406\u6a21\u5f0f"),t.qZA(),t.TgZ(36,"div",5)(37,"mat-button-toggle-group",11),t.YNc(38,U,2,2,"mat-button-toggle",12),t.ALo(39,"keyvalue"),t.qZA()()(),t.TgZ(40,"div",3)(41,"div",4),t._uU(42,"Socks5 \u4ee3\u7406\u7aef\u53e3"),t.qZA(),t.TgZ(43,"div",5)(44,"mat-form-field",13)(45,"mat-label"),t._uU(46,"Socks5 \u4ee3\u7406\u7aef\u53e3"),t.qZA(),t._UZ(47,"input",14),t.qZA()()(),t.TgZ(48,"div",3)(49,"div",4),t._uU(50,"HTTP \u4ee3\u7406\u7aef\u53e3"),t.qZA(),t.TgZ(51,"div",5)(52,"mat-form-field",13)(53,"mat-label"),t._uU(54,"HTTP \u4ee3\u7406\u7aef\u53e3"),t.qZA(),t._UZ(55,"input",15),t.qZA()()(),t.TgZ(56,"div",3)(57,"div",4),t._uU(58,"\u6df7\u5408\u4ee3\u7406\u7aef\u53e3"),t.qZA(),t.TgZ(59,"div",5)(60,"mat-form-field",13)(61,"mat-label"),t._uU(62,"\u6df7\u5408\u4ee3\u7406\u7aef\u53e3"),t.qZA(),t._UZ(63,"input",16),t.qZA()()(),t.TgZ(64,"div",3)(65,"div",4),t._uU(66,"\u5916\u90e8\u63a7\u5236\u8bbe\u7f6e"),t.qZA(),t.TgZ(67,"div",5)(68,"div",17),t.NdJ("click",function(){return e.openDialog()}),t.TgZ(69,"span"),t._uU(70),t.qZA(),t.TgZ(71,"span"),t._uU(72,":"),t.qZA(),t.TgZ(73,"span"),t._uU(74),t.qZA()()()()()()()(),t.TgZ(75,"div",18)(76,"button",19),t.NdJ("click",function(){return e.save()}),t.TgZ(77,"mat-icon"),t._uU(78,"save"),t.qZA()()()()),2&o&&(t.xp6(1),t.Q6J("formGroup",e.validateForm),t.xp6(37),t.Q6J("ngForOf",t.lcZ(39,5,e.clashMode)),t.xp6(32),t.Oqu(null==e.externalControlConfig?null:e.externalControlConfig.hostname),t.xp6(4),t.Oqu(null==e.externalControlConfig?null:e.externalControlConfig.port),t.xp6(2),t.Q6J("color",e.validateForm.pristine?"primary":"accent"))},dependencies:[s.sg,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,u.a8,u.dn,b.Hw,v.Nt,d.KE,d.hX,h.cs,T.Rr,Z.A9,Z.Yi,s.Nd],styles:[".flex-box[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.flex-item[_ngcontent-%COMP%]{flex-grow:0;flex-shrink:0;flex-basis:calc(50% - 16px);margin:0 8px 8px;display:flex;justify-content:space-between;align-items:center}.flex-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.external-config[_ngcontent-%COMP%]{font-size:16px;cursor:pointer;text-decoration:underline}.save[_ngcontent-%COMP%]{margin-top:24px;display:flex;justify-content:flex-end}"]}),n})();const B=[{path:"",component:(()=>{class n{get externalControlConfig(){return this.storeService.externalControlConfig}ngOnInit(){}constructor(o,e){this.storeService=o,this.clashApiService=e,this.dashboardConfig$=this.clashApiService.fetchConfig()}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(p.d),t.Y36(C.A))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-clash-settings"]],decls:2,vars:4,consts:[[3,"dashboardConfig","externalControlConfig"]],template:function(o,e){1&o&&(t._UZ(0,"app-settings",0),t.ALo(1,"async")),2&o&&t.Q6J("dashboardConfig",t.lcZ(1,2,e.dashboardConfig$))("externalControlConfig",e.externalControlConfig)},dependencies:[y,s.Ov]}),n})()}];let q=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.Bz.forChild(B),f.Bz]}),n})(),M=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[s.ez,l.u5,l.UX,q,A.MaterialModule]}),n})()}}]);