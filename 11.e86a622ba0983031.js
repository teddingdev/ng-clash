"use strict";(self.webpackChunkng_clash=self.webpackChunkng_clash||[]).push([[11],{3011:(R,v,r)=>{r.r(v),r.d(v,{ClashProxyModule:()=>Q});var d=r(6895),M=r(294),f=r(7337),C=r(7579),p=r(4004),e=r(4650),w=r(7009),O=r(1135),Z=r(3900),U=r(3151),h=(()=>{return(o=h||(h={})).Shadowsocks="Shadowsocks",o.Vmess="Vmess",o.Trojan="Trojan",o.Socks="Socks",o.Http="Http",o.Snell="Snell",h;var o})(),x=(()=>{return(o=x||(x={})).Selector="Selector",o.URLTest="URLTest",o.Fallback="Fallback",o.LoadBalance="LoadBalance",x;var o})(),A=r(210);let _=(()=>{class o{fetch(t){this.fetchAction$.next(t)}fetchProviders(){return this.clashApiService.fetchProvideMap().pipe((0,p.U)(t=>t.providers))}putProxy(t,n){return this.clashApiService.putProxy(t,n)}constructor(t){this.clashApiService=t,this.providers$=new C.x,this.fetchAction$=new O.X((new Date).toString()),this.proxies$=this.fetchAction$.pipe((0,Z.w)(()=>this.clashApiService.fetchProxyMap().pipe((0,p.U)(n=>n.proxies),(0,p.U)(n=>({proxies:Object.values(n).filter(l=>Object.values(h).find(m=>m===l.type)),policyGroups:Object.values(n).filter(l=>Object.values(x).find(m=>m===l.type)),global:Object.values(n).filter(l=>"GLOBAL"===l.name)})))),(0,U.d)(1))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(A.A))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var S=r(4633),G=r(7392),g=r(4006),c=r(7084),P=r(7331);function T(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"mat-chip-option",11),e.NdJ("click",function(){const a=e.CHM(t).$implicit,y=e.oxw().$implicit,l=e.oxw();return e.KtG(l.handlePutProxy(y.name,a))}),e._uU(1),e.qZA()}if(2&o){const t=i.$implicit,n=e.oxw().$implicit;e.Q6J("selected",t===n.now)("selectable",!1),e.xp6(1),e.hij(" ",t," ")}}function b(o,i){if(1&o&&(e.TgZ(0,"mat-expansion-panel",null,2)(2,"mat-expansion-panel-header")(3,"mat-panel-title",3)(4,"div",4)(5,"div"),e._uU(6),e.qZA()(),e.TgZ(7,"div",5),e._uU(8),e.qZA()(),e.TgZ(9,"mat-panel-description")(10,"div",6),e._uU(11),e.qZA(),e.TgZ(12,"div",7),e._uU(13,"\u2192"),e.qZA(),e.TgZ(14,"div",8)(15,"mat-chip-option",9),e._uU(16),e.qZA()()()(),e.TgZ(17,"mat-chip-listbox"),e.YNc(18,T,2,3,"mat-chip-option",10),e.qZA()()),2&o){const t=i.$implicit,n=e.MAs(1);e.xp6(6),e.Oqu(t.all.length),e.xp6(2),e.Oqu(t.name),e.xp6(3),e.hij("[ ",t.type," ]"),e.xp6(4),e.Q6J("selectable",!1)("disabled",n.expanded),e.xp6(1),e.hij(" ",t.now," "),e.xp6(2),e.Q6J("ngForOf",t.all)}}const $=["*"];let F=(()=>{class o{constructor(){this.policyGroups=null,this.onPutProxy=new e.vpe}handlePutProxy(t,n){this.onPutProxy.emit({policyName:t,proxyName:n})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-proxy-group"]],viewQuery:function(t,n){if(1&t&&e.Gf(c.pp,5),2&t){let s;e.iGM(s=e.CRH())&&(n.accordion=s.first)}},inputs:{policyGroups:"policyGroups"},outputs:{onPutProxy:"onPutProxy"},ngContentSelectors:$,decls:3,vars:1,consts:[["multi",""],[4,"ngFor","ngForOf"],["panel",""],[1,"title"],[1,"policy-badge"],[1,"policy-name"],[1,"policy-type"],[1,"separator"],[1,"selected"],["selected","",3,"selectable","disabled"],[3,"selected","selectable","click",4,"ngFor","ngForOf"],[3,"selected","selectable","click"]],template:function(t,n){1&t&&(e.F$t(),e.Hsn(0),e.TgZ(1,"mat-accordion",0),e.YNc(2,b,19,7,"mat-expansion-panel",1),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngForOf",n.policyGroups))},dependencies:[d.sg,P.z2,P.iO,c.pp,c.ib,c.yz,c.yK,c.u4],styles:[".title[_ngcontent-%COMP%]{display:flex}.policy-name[_ngcontent-%COMP%]{font-weight:500;flex:1 0 auto}.policy-badge[_ngcontent-%COMP%]{flex:0 0 48px}.policy-badge[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:block;padding:4px;width:16px;height:16px;border-radius:40px;line-height:16px;text-align:center;font-size:14px;overflow:hidden}.policy-type[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.separator[_ngcontent-%COMP%]{margin:0 8px}.selected-light[_ngcontent-%COMP%]{opacity:.3}"]}),o})();var u=r(3546);const j=function(o){return{"proxy-card-list":o}};function J(o,i){if(1&o&&(e.TgZ(0,"div",2)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),e._uU(4),e.qZA(),e.TgZ(5,"mat-card-subtitle"),e._uU(6),e.qZA()(),e._UZ(7,"mat-card-actions",3),e.qZA()()),2&o){const t=i.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(3,j,"view_list"===n.viewModel)),e.xp6(4),e.Oqu(t.type),e.xp6(2),e.Oqu(t.name)}}let B=(()=>{class o{constructor(){this.proxies=null,this.viewModel="grid_view"}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-proxy-card"]],inputs:{proxies:"proxies",viewModel:"viewModel"},decls:2,vars:1,consts:[["matRipple","",1,"proxy-card-wrap"],["class","proxy-card",3,"ngClass",4,"ngFor","ngForOf"],[1,"proxy-card",3,"ngClass"],["align","end"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,J,8,5,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.proxies))},dependencies:[d.mk,d.sg,u.a8,u.hq,u.dk,u.$j,u.n5],styles:[".proxy-card-wrap[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-wrap:wrap}.proxy-card[_ngcontent-%COMP%]{box-sizing:border-box;height:100%;transition:all .2s cubic-bezier(.17,.84,.44,1);width:calc(25% - 12px);margin-bottom:16px;margin-right:16px;position:relative;top:0}.proxy-card[_ngcontent-%COMP%]:nth-child(4n){margin-right:0}.proxy-card[_ngcontent-%COMP%]:hover{top:-4px}.proxy-card-list[_ngcontent-%COMP%]{width:100%;margin-right:0}"]}),o})();const L=[{path:"",component:(()=>{class o{toggleViewModel(t){this.viewModel="grid_view"===t?"view_list":"grid_view"}putProxy(t){const{proxyName:n,policyName:s}=t;this.clashService.putProxy(n,s).subscribe(a=>{null===a?this._snackBar.open("success","close",{duration:3e3}):void 0===a&&this._snackBar.open("error","close",{duration:3e3}),this.clashService.fetch((new Date).toString())})}ngOnInit(){}ngOnDestroy(){this.stop$.next("stop")}constructor(t,n){this._snackBar=t,this.clashService=n,this.viewModel="grid_view",this.stop$=new C.x,this.inputModel="124",this.proxies$=this.clashService.proxies$.pipe((0,p.U)(s=>s.proxies)),this.global$=this.clashService.proxies$.pipe((0,p.U)(s=>s.global)),this.policyGroups$=this.clashService.proxies$.pipe((0,p.U)(s=>s.policyGroups)),this.providers$=this.clashService.fetchProviders()}change(t){console.log(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(w.ux),e.Y36(_))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-clash-proxy"]],decls:16,vars:10,consts:[["id","test",3,"ngModel","ngModelChange","change"],[1,"container"],[1,"head"],[3,"policyGroups","onPutProxy"],[1,"head-left"],[1,"head-rigt"],[1,"view-model-icon",3,"click"],["matListItemIcon",""],[3,"proxies","viewModel"]],template:function(t,n){1&t&&(e.TgZ(0,"input",0),e.NdJ("ngModelChange",function(a){return n.inputModel=a})("change",function(a){return n.change(a)}),e.qZA(),e._uU(1),e.TgZ(2,"div",1)(3,"div",2),e._uU(4,"\u7b56\u7565\u7ec4"),e.qZA(),e.TgZ(5,"app-proxy-group",3),e.NdJ("onPutProxy",function(a){return n.putProxy(a)}),e.ALo(6,"async"),e.qZA(),e.TgZ(7,"div",2)(8,"div",4),e._uU(9,"\u4ee3\u7406"),e.qZA(),e.TgZ(10,"div",5)(11,"span",6),e.NdJ("click",function(){return n.toggleViewModel(n.viewModel)}),e.TgZ(12,"mat-icon",7),e._uU(13),e.qZA()()()(),e._UZ(14,"app-proxy-card",8),e.ALo(15,"async"),e.qZA()),2&t&&(e.Q6J("ngModel",n.inputModel),e.xp6(1),e.hij("",n.inputModel," "),e.xp6(4),e.Q6J("policyGroups",e.lcZ(6,6,n.policyGroups$)),e.xp6(8),e.Oqu(n.viewModel),e.xp6(1),e.Q6J("proxies",e.lcZ(15,8,n.proxies$))("viewModel",n.viewModel))},dependencies:[S.Yt,G.Hw,g.Fj,g.JJ,g.On,F,B,d.Ov],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%}.head[_ngcontent-%COMP%]{margin:16px 4px;font-size:24px;font-weight:700;height:32px;line-height:32px;display:flex}.head-right[_ngcontent-%COMP%], .head-left[_ngcontent-%COMP%]{flex:1 auto}"]}),o})()}];let z=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.Bz.forChild(L),f.Bz]}),o})();var N=r(5385);let Q=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.ez,z,N.MaterialModule,M.I,g.u5]}),o})()}}]);